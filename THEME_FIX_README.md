# 黑暗/白天模式显示问题修复

## 修复内容

### 1. 主题持久化
- 添加了 `localStorage` 支持，用户选择的主题会在刷新页面后保持
- 自动检测系统主题偏好（`prefers-color-scheme`）
- 首次访问时默认使用系统主题

### 2. 统一主题管理
- 创建了 `ThemeProvider` 上下文组件，统一管理主题状态
- 创建了 `ThemeToggle` 组件，提供一致的主题切换按钮
- 所有页面共享同一个主题状态

### 3. 主题切换按钮改进
- 更美观的按钮设计，包含太阳/月亮图标
- 悬停效果和过渡动画
- 清晰的文字提示（深色/浅色）
- 在白天模式下有更好的可见性

### 4. 全局样式优化
- 创建了 `globals.css` 文件，避免样式重复
- 优化了CSS变量系统，支持深色和浅色主题
- 改进了按钮、卡片等组件的主题适配

### 5. 所有页面主题支持
- 主页 (`/`) - 完整的主题支持
- 归档页面 (`/archive`) - 主题支持
- 具体日期简报 (`/brief/[date]`) - 主题支持  
- 产品历史页面 (`/history/[product]`) - 主题支持

## 技术实现

### 组件结构
```
app/
├── components/
│   ├── ThemeProvider.tsx    # 主题上下文提供者
│   └── ThemeToggle.tsx      # 主题切换按钮
├── layout.tsx               # 根布局，包含主题提供者
├── globals.css              # 全局样式
└── (site)/
    └── page.tsx            # 主页
```

### 主题切换流程
1. 用户点击主题切换按钮
2. `ThemeToggle` 组件调用 `useTheme().toggleTheme()`
3. `ThemeProvider` 更新主题状态
4. 主题状态保存到 `localStorage`
5. 所有使用 `useTheme()` 的组件自动更新
6. CSS类名动态切换（`light` 类）

### CSS变量系统
- 深色主题：深色背景、浅色文字、蓝色调
- 浅色主题：浅色背景、深色文字、蓝色调
- 渐变背景和阴影效果适配两种主题

## 使用方法

### 开发者
- 在组件中使用 `useTheme()` 获取主题状态
- 使用 `<ThemeToggle />` 组件添加主题切换按钮
- 通过 `themeLight` 变量控制CSS类名

### 用户
- 点击右上角的主题切换按钮
- 主题选择会自动保存
- 刷新页面后主题保持不变

## 兼容性
- 支持现代浏览器的 `localStorage` 和 `prefers-color-scheme`
- 优雅降级：如果不支持系统主题检测，默认使用深色主题
- 响应式设计，在移动设备上也有良好的显示效果
